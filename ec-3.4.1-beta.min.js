/**
 * Author: EverCommerce
 * Author URI: https://www.evercommerce.com/
 * Version: 3.4.1-beta
 * Updated: 05/19/2023
 * 
 * Copyright EverCommerce
 * All Rights Reserved.
 * 
 * NOTICE: Unauthorized use or copying of this file
 *         via any medium is strictly prohibited.
 *         Proprietary and confidential
 */
(()=>{"use strict";var e={};function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var r,n,i,a,c=[],u=!0,l=!1;try{if(i=(o=o.call(e)).next,0===t){if(Object(o)!==o)return;u=!1}else for(;!(u=(r=i.call(o)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){l=!0,n=e}finally{try{if(!u&&null!=o.return&&(a=o.return(),Object(a)!==a))return}finally{if(l)throw n}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return r(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);"Object"===o&&e.constructor&&(o=e.constructor.name);if("Map"===o||"Set"===o)return Array.from(e);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return r(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,r=new Array(t);o<t;o++)r[o]=e[o];return r}function n(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,a(r.key),r)}}function i(e,t,o){return(t=a(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function a(e){var o=function(e,o){if("object"!==t(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,o||"default");if("object"!==t(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===o?String:Number)(e)}(e,"string");return"symbol"===t(o)?o:String(o)}e.d=(t,o)=>{for(var r in o)e.o(o,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:o[r]})},e.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var c=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i(this,"getFirst",(function(){return t.readCookie("__ecatft")})),i(this,"getLast",(function(){return t.readCookie("__ecatlt")})),i(this,"setDomain",(function(e){t.domain=e||t.extractHostname()})),i(this,"autofill",(function(e){var o=t.readCookie("__ecatft"),r=t.readCookie("__ecatlt");if(!e)return console.error("[$EC Error] Must provide field map to autofill form fields."),!1;t.debug&&(console.group("[$EC Debug] Field Mapping"),console.table(e),console.groupEnd()),setTimeout((function(){e.hasOwnProperty("utm_campaign")?Object.keys(e).forEach((function(t){document.querySelectorAll(e[t].first).forEach((function(e){e.value=o[t]||"[blank]"})),document.querySelectorAll(e[t].last).forEach((function(e){e.value=r[t]||"[blank]"}))})):e.hasOwnProperty("first_touch")&&(Object.keys(e.first_touch).forEach((function(t){document.querySelectorAll(e.first_touch[t]).forEach((function(e){e.value=o[t]||"[blank]"}))})),Object.keys(e.last_touch).forEach((function(t){document.querySelectorAll(e.last_touch[t]).forEach((function(e){e.value=r[t]||"[blank]"}))})))}),50)})),i(this,"log",(function(){console.group("About $EC"),console.log("Version: ",t.version),console.log("Domain: ",t.domain),void 0!==window.heap?window.heap.identity?console.log("[$EC] Heap ID: ",window.heap.identity):console.log("[$EC] Heap ID: Not Set"):console.error("[$EC Error] Heap Not Loaded"),console.groupEnd();var e=t.readCookie("__ecatft"),o=t.readCookie("__ecatlt");console.group("First Touch"),console.table(e),console.groupEnd(),console.group("Last Touch"),console.table(o),console.groupEnd()})),i(this,"heap",{identify:function(e){if(e){var o=!1;if(void 0!==window.heap&&(o=!0),!o){if(t.debug)return console.error("[$EC Error] Heap API is not defined."),t.generateUUID(e);if(!t.debug)return}if(window.heap.identity&&t.debug&&console.log("[$EC Debug] Already Identified: ",window.heap.identity),!window.heap.identity){var r=t.generateUUID(e);window.heap.identify(r),t.debug&&console.log("[$EC Debug] Identified with: ",r)}return window.heap.identity}console.error("[$EC Error] Must provide an email address.")},autofill:function(e,o){for(var r=document.forms,n=function(){var n=r[i];return n.classList.contains("mktoForm")||n.classList.contains("ecmktoForm")?"continue":void n.addEventListener("submit",(function(r){r.preventDefault();var i=n.querySelector(e).value,a=n.querySelector(o);if(i){var c=t.heap.identify(i);void 0!==a&&(a.value=c)}n.submit()}))},i=0;i<r.length;i++)n()}}),i(this,"mkto",{blindForm:{load:function(e,o,r){var n=document.createElement("form");n.id="mktoForm_".concat(r),t.debug||(n.style.display="none"),document.body.appendChild(n),t.debug&&console.warn("[$EC Warning] Debug Mode is enabled. Marketo Form is displayed. Disable Debug mode for production use.",n);var i=document.createElement("script");i.type="text/javascript",i.async=!0,i.src="//".concat(e,"/js/forms2/js/forms2.min.js"),document.body.appendChild(i),i.addEventListener("load",(function(){window.MktoForms2.loadForm("//".concat(e),o,r),window.MktoForms2.whenReady((function(e){t.handleMktoFormHiddenFields(),e.ecFormType="blind"}))}))},submit:function(e,o){var r=document.querySelector(e);window.MktoForms2.whenReady((function(e){e.vals(t.mkto.blindForm.mapVals(r,o)),e.submit()}))},mapVals:function(e,t){var r={};return Object.entries(t).forEach((function(t){var n,i=o(t,2),a=i[0],c=i[1],u=e.querySelector(a);u?(n="checkbox"==u.type?u.checked?"yes":"no":u.value,r[c]=n):console.error("[$EC Error] Field with selector ".concat(a," does not exist."))})),r}},kioskMode:function(){console.log("[$EC] Kiosk Mode Enabled"),document.cookie="_mkto_trk=;path=/;domain=".concat(t.domain,";expires=0"),window.MktoForms2.whenReady((function(e){e.ecFormType="kiosk",window.mktoForm=e,e.addHiddenFields({_mkt_trk:"",conversion_type__c:"tradeshow kiosk"})}))}}),i(this,"mktoBlindForm",this.mkto.blindForm),this.version="3.4.1-beta",this.debug||(this.debug=!1),this.setDomain(),this.handleAttributionCookie(),void 0!==window.MktoForms2&&this.handleMktoFormHiddenFields()}var t,r,a;return t=e,(r=[{key:"extractHostname",value:function(){var e,t=window.location.href;if("localhost"!==(e="localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname?window.location.hostname:t.indexOf("://")>-1?t.split("/")[2]:t.split("/")[0])&&"127.0.0.1"!==e){var o=(e=(e=e.split(":")[0]).split("?")[0]).split(".");e=o[o.length-2]+"."+o[o.length-1]}return e}},{key:"handleAttributionCookie",value:function(){var e=this.readCookie("__ecatft"),t=this.readCookie("__ecatlt"),o=new URLSearchParams(document.location.search),r={utm_campaign:o.get("utm_campaign")?o.get("utm_campaign").substring(0,254):"",utm_source:o.get("utm_source")?o.get("utm_source").substring(0,254):"",utm_medium:o.get("utm_medium")?o.get("utm_medium").substring(0,254):"",utm_content:o.get("utm_content")?o.get("utm_content").substring(0,254):"",utm_term:o.get("utm_term")?o.get("utm_term").substring(0,254):"",utm_device:o.get("utm_device")?o.get("utm_device").substring(0,254):"",referrer:document.referrer.split("?")[0].substring(0,254)||"",gclid:o.get("gclid")?o.get("gclid").substring(0,254):"",lp:(document.location.hostname+document.location.pathname).substring(0,254)||""};0===Object.keys(e).length&&this.createCookie("__ecatft",r),0===Object.keys(t).length&&this.createCookie("__ecatlt",r)}},{key:"handleMktoFormHiddenFields",value:function(){var e=this;window.MktoForms2.whenReady((function(t){var o=e.readCookie("__ecatft"),r=e.readCookie("__ecatlt"),n={ec_utm_campaign_first__c:o.utm_campaign||"NULL",ec_utm_source_first__c:o.utm_source||"NULL",ec_utm_medium_first__c:o.utm_medium||"NULL",ec_utm_content_first__c:o.utm_content||"NULL",ec_utm_term_first__c:o.utm_term||"NULL",ec_utm_device_first__c:o.utm_device||"NULL",gclid__c:o.gclid||"NULL",GCLID__c:o.gclid||"NULL",ec_landing_page_first__c:o.lp||"NULL",ec_referrer_first__c:o.referrer||"NULL",ec_utm_campaign_last__c:r.utm_campaign||"NULL",ec_utm_source_last__c:r.utm_source||"NULL",ec_utm_medium_last__c:r.utm_medium||"NULL",ec_utm_content_last__c:r.utm_content||"NULL",ec_utm_term_last__c:r.utm_term||"NULL",ec_utm_device_last__c:r.utm_device||"NULL",gclid_last__c:r.gclid||"NULL",GCLID_last__c:r.gclid||"NULL",ec_referrer_last__c:r.referrer||"NULL",ec_landing_page_last__c:r.lp||"NULL"};t.addHiddenFields(n),t.onSubmit((function(){if("kiosk"===t.ecFormType)t.vals({_mkt_trk:""});else if(void 0!==window.heap&&t.validate()){var o=t.vals().Email,r=e.heap.identify(o);t.addHiddenFields({ec_heap_id__c:r})}e.debug&&(console.group("[$EC Debug] Form Vals"),console.table(t.vals()),console.groupEnd())})),t.onSuccess((function(){if(void 0!==window.dataLayer&&window.dataLayer.push({event:"MarketoFormSubmit"}),"blind"===t.ecFormType)return!1}))}))}},{key:"createCookie",value:function(e,t){if(e)if(t){var o=t?JSON.stringify(t):"",r="";if("__ecatft"==e){var n=new Date;n.setFullYear(n.getFullYear()+10),r=" expires="+n.toUTCString()+";"}document.cookie=e+"="+o+"; path=/; domain="+this.domain+";"+r}else console.error("[$EC Error] Must provide a value.");else console.error("[$EC Error] Must provide a name.")}},{key:"readCookie",value:function(e){if(e){for(var t=e+"=",o=document.cookie.split(";"),r=0;r<o.length;r++){for(var n=o[r];" "==n.charAt(0);)n=n.substring(1,n.length);if(0==n.indexOf(t))return JSON.parse(n.substring(t.length,n.length))}return{}}console.error("[$EC Error] Must provide a name.")}},{key:"generateUUID",value:function(e){var t=function(e){function t(e,t){return(t>>>e|t<<32-e)>>>0}return function(){for(var o=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),r=new Uint32Array(64),n=1779033703,i=3144134277,a=1013904242,c=2773480762,u=1359893119,l=2600822924,s=528734635,d=1541459225,m=function(e){for(var t=(448-e.length-1)%512,o=new Uint8Array(t/8+1).fill(0),r=8*e.length,n=new Uint8Array(8),i=0;i<8;i++)n[i]=r>>>56-8*i&255;for(var a=new Uint8Array(e.length+1+o.length+n.length),c=0;c<e.length;c++)a[c]=e[c];a[e.length]=128;for(var u=0;u<o.length;u++)a[e.length+1+u]=o[u];for(var l=0;l<n.length;l++)a[e.length+1+o.length+l]=n[l];return a}(e.split("").map((function(e){return e.charCodeAt(0)}))),f=function(e){if("string"!=typeof e&&(e=e.toString()),!e.length)return new Uint32Array(0);for(var t=new Uint32Array(e.length/4),o=0;o<e.length;o+=4)t[o/4]=e.charCodeAt(o)<<24|e.charCodeAt(o+1)<<16|e.charCodeAt(o+2)<<8|e.charCodeAt(o+3);return t}(m),_=0;_<f.length;_+=16){for(var g=r,h=0;h<16;h++)g[h]=f[_+h];for(var p=16;p<64;p++){var v=t(7,g[p-15])^t(18,g[p-15])^g[p-15]>>>3,y=t(17,g[p-2])^t(19,g[p-2])^g[p-2]>>>10;g[p]=g[p-16]+v+g[p-7]+y>>>0}for(var b=n,w=i,k=a,L=c,E=u,C=l,F=s,U=d,S=0;S<64;S++){var A=d+(t(6,u)^t(11,u)^t(25,u))+(u&l^~u&s)+o[S]+g[S]>>>0;U=F,F=C,C=E,E=L+A>>>0,L=k,k=w,w=b,b=A+((t(2,n)^t(13,n)^t(22,n))+(n&i^n&a^i&a)>>>0)>>>0}n=n+b>>>0,i=i+w>>>0,a=a+k>>>0,c=c+L>>>0,u=u+E>>>0,l=l+C>>>0,s=s+F>>>0,d=d+U>>>0}return[n,i,a,c,u,l,s,d].map((function(e){return e.toString(16).padStart(8,"0")})).join("")}()}(e=e.toLowerCase().trim());return t.slice(0,8)+"-"+t.slice(8,12)+"-4"+t.slice(13,16)+"-a"+t.slice(17,20)+"-"+t.slice(20)}}])&&n(t.prototype,r),a&&n(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();window.$EC=new c})();
