/**
 * Author: EverCommerce
 * Author URI: https://www.evercommerce.com/
 * Version: 4.0.2
 * Updated: 03/14/2024
 * 
 * Copyright EverCommerce
 * All Rights Reserved.
 * 
 * NOTICE: Unauthorized use or copying of this file
 *         via any medium is strictly prohibited.
 *         Proprietary and confidential
 */
(()=>{function t(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||i(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,n)}return o}function o(t){for(var o=1;o<arguments.length;o++){var n=null!=arguments[o]?arguments[o]:{};o%2?e(Object(n),!0).forEach((function(e){l(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):e(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var o=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=o){var n,r,i,a,c=[],l=!0,s=!1;try{if(i=(o=o.call(t)).next,0===e){if(Object(o)!==o)return;l=!1}else for(;!(l=(n=i.call(o)).done)&&(c.push(n.value),c.length!==e);l=!0);}catch(t){s=!0,r=t}finally{try{if(!l&&null!=o.return&&(a=o.return(),Object(a)!==a))return}finally{if(s)throw r}}return c}}(t,e)||i(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){if(t){if("string"==typeof t)return a(t,e);var o=Object.prototype.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?a(t,e):void 0}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var o=0,n=new Array(e);o<e;o++)n[o]=t[o];return n}function c(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,s(n.key),n)}}function l(t,e,o){return(e=s(e))in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}function s(t){var e=function(t,e){if("object"!=n(t)||!t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var r=o.call(t,e||"default");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==n(e)?e:String(e)}var u=function(){function e(){var t=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),l(this,"getFirst",(function(){return t._readCookie("__ecatft")})),l(this,"getLast",(function(){return t._readCookie("__ecatlt")})),l(this,"autofill",(function(e){var o=t._readCookie("__ecatft"),n=t._readCookie("__ecatlt");e&&e.first_touch&&e.last_touch?setTimeout((function(){Object.keys(e.first_touch).forEach((function(t){document.querySelectorAll(e.first_touch[t]).forEach((function(e){e.value=o[t]||"[blank]"}))})),Object.keys(e.last_touch).forEach((function(t){document.querySelectorAll(e.last_touch[t]).forEach((function(e){e.value=n[t]||"[blank]"}))}))}),50):console.error("$EC Error: Field map object is missing or incomplete.")})),l(this,"log",(function(){console.group("%cAbout $EC","color: #16CA94"),console.log("Version: ",t.version),console.log("Domain: ",t.domain),console.log("Config:",t.config),console.groupEnd(),console.group("%cAnalytics APIs","color: #16CA94"),t.apis.analytics?console.log('Segment\'s "analytics" APIs will be used for track and identify'):t.apis.heap?console.log('Heap\'s "heap" APIs will be used for track and identify'):console.log("No analytics tracking API defined."),console.groupEnd(),console.group("%cForms APIs","color: #16CA94"),void 0!==window.MktoForms2?console.log("MktoForms2 is available"):void 0!==window.HubSpotForms?console.log("HubsSpotForms is available"):console.log("No forms API defined."),console.groupEnd();var e=t._readCookie("__ecatft"),o=t._readCookie("__ecatlt");console.group("%cAttribution Cookie Data","color: #16CA94"),console.log("First Touch (__ecatft)",e),console.log("Last Touch  (__ecatlt)",o),console.groupEnd()})),l(this,"identify",(function(e){var o,n;if(e){if(!t.apis.analytics&&!t.apis.heap)return console.error("$EC Error: Cannot identify, identify API is not defined."),t.generateGUID(e);var r=(null===(o=window)||void 0===o||null===(o=o.analytics)||void 0===o||null===(o=o.user())||void 0===o?void 0:o.id())||(null===(n=window)||void 0===n||null===(n=n.heap)||void 0===n?void 0:n.identity)||!1;if(!1!==r)return r;var i=t.generateGUID(e);return t.apis.analytics?window.analytics.identify(i):t.apis.heap?window.heap.identify(i):console.error("$EC Error: Unable to identify user."),i}console.error("$EC Error: Cannot identify, missing email.")})),l(this,"track",(function(e,o){e?(e.startsWith("Marketing - ")||(e="Marketing - ".concat(e)),t.apis.analytics?window.analytics.track(e,o):t.apis.heap?window.heap.track(e,o):console.error("$EC Error: No analytics API defined.")):console.error("$EC Error: Missing event name.")})),l(this,"generateGUID",(function(t){var e=function(t){function e(t,e){return(e>>>t|e<<32-t)>>>0}return function(){for(var o=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),n=new Uint32Array(64),r=1779033703,i=3144134277,a=1013904242,c=2773480762,l=1359893119,s=2600822924,u=528734635,d=1541459225,m=function(t){for(var e=(448-t.length-1)%512,o=new Uint8Array(e/8+1).fill(0),n=8*t.length,r=new Uint8Array(8),i=0;i<8;i++)r[i]=n>>>56-8*i&255;for(var a=new Uint8Array(t.length+1+o.length+r.length),c=0;c<t.length;c++)a[c]=t[c];a[t.length]=128;for(var l=0;l<o.length;l++)a[t.length+1+l]=o[l];for(var s=0;s<r.length;s++)a[t.length+1+o.length+s]=r[s];return a}(t.split("").map((function(t){return t.charCodeAt(0)}))),_=function(t){if("string"!=typeof t&&(t=t.toString()),!t.length)return new Uint32Array(0);for(var e=new Uint32Array(t.length/4),o=0;o<t.length;o+=4)e[o/4]=t.charCodeAt(o)<<24|t.charCodeAt(o+1)<<16|t.charCodeAt(o+2)<<8|t.charCodeAt(o+3);return e}(m),f=0;f<_.length;f+=16){for(var p=n,h=0;h<16;h++)p[h]=_[f+h];for(var g=16;g<64;g++){var b=e(7,p[g-15])^e(18,p[g-15])^p[g-15]>>>3,y=e(17,p[g-2])^e(19,p[g-2])^p[g-2]>>>10;p[g]=p[g-16]+b+p[g-7]+y>>>0}for(var v=r,w=i,k=a,F=c,E=l,C=s,L=u,S=d,A=0;A<64;A++){var M=d+(e(6,l)^e(11,l)^e(25,l))+(l&s^~l&u)+o[A]+p[A]>>>0;S=L,L=C,C=E,E=F+M>>>0,F=k,k=w,w=v,v=M+((e(2,r)^e(13,r)^e(22,r))+(r&i^r&a^i&a)>>>0)>>>0}r=r+v>>>0,i=i+w>>>0,a=a+k>>>0,c=c+F>>>0,l=l+E>>>0,s=s+C>>>0,u=u+L>>>0,d=d+S>>>0}return[r,i,a,c,l,s,u,d].map((function(t){return t.toString(16).padStart(8,"0")})).join("")}()}(t=t.toLowerCase().trim());return e.slice(0,8)+"-"+e.slice(8,12)+"-4"+e.slice(13,16)+"-a"+e.slice(17,20)+"-"+e.slice(20)})),l(this,"loadMarketoBlindForm",(function(e){if(e&&e.mktoDomain&&e.munchkinId&&e.mktoFormId&&e.formSelector&&e.dataMap){var o=document.createElement("form");o.id="mktoForm_".concat(e.mktoFormId),t.config.debug||(o.style.display="none"),document.body.appendChild(o);var i=document.createElement("script");i.type="text/javascript",i.async=!0,i.src="//".concat(e.mktoDomain,"/js/forms2/js/forms2.min.js"),document.body.appendChild(i),i.addEventListener("load",(function(){t._handleMktoForms(),window.MktoForms2.loadForm("//".concat(e.mktoDomain),e.munchkinId,e.mktoFormId),window.MktoForms2.whenRendered((function(t){var o=document.querySelector(e.formSelector);t.getFormElem()[0].setAttribute("data-formType","blind"),o.setAttribute("data-formType","blind"),t.getFormElem()[0].setAttribute("data-boundForm",e.formSelector),e.followupUrl&&(t.followupUrl=e.followupUrl),e.bindFields?(void 0!==e.dataMap?Object.entries(e.dataMap).forEach((function(t){var e=r(t,2),n=e[0],i=e[1],a=o.querySelector(n);a?a.addEventListener("change",(function(){var t=a.value,e=document.querySelector('input[name="'.concat(i,'"]'));"checkbox"===a.type?e.checked=a.checked:e.value=t})):console.error("$EC Error: Field with selector ".concat(n," does not exist."))})):console.error("$EC Error: Missing field mapping."),e.bindSubmitEvent&&o.addEventListener("submit",(function(){t.submit()}))):e.submitData&&(null!=n(e.dataMap)?t.vals(e.dataMap):console.error("$EC Error: Missing field data."))})),e.submitOnLoad&&e.submitData&&window.MktoForms2.whenReady((function(t){t.submit()}))}))}else console.error("$EC Error: Required config options are missing.")})),l(this,"submitMarketoBlindForm",(function(t){t&&t.formSelector?void 0!==document.querySelector("#mktoForm_".concat(t.mktoFormId))&&null!==document.querySelector("#mktoForm_".concat(t.mktoFormId))?document.querySelector("#mktoForm_".concat(t.mktoFormId)).submit():console.error("$EC Error: Form with selector `".concat(t.formSelector,"` does not exist.")):console.error("$EC Error: Required config options are missing.")})),l(this,"enableMarketoKioskMode",(function(){console.log("%c$EC","color: #16CA94","Kiosk Mode Enabled"),document.cookie="_mkto_trk=;path=/;domain=".concat(t.domain,";expires=0"),window.MktoForms2.whenRendered((function(t){t.getFormElem()[0].setAttribute("data-formType","kiosk"),t.addHiddenFields({_mkt_trk:""})}))})),l(this,"heap",{identify:this.identify}),l(this,"mkto",{blindForm:{load:this.loadMarketoBlindForm,submit:this.submitMarketoBlindForm},kioskMode:this.enableMarketoKioskMode}),l(this,"handleMktoForms",this._handleMktoForms),l(this,"handleHubspotForms",this._handleHubspotForms),l(this,"extractHostname",this._extractHostname),l(this,"handleAttributionCookie",this._handleAttributionCookie),l(this,"generateUUID",this.generateGUID),l(this,"handleMktoFormHiddenFields",this._handleMktoForms),this.version="4.0.2",this.q=window.$EC.q,this.config=window.$EC.config,this.handledForms=!1,this.apis={MktoForms2:void 0!==window.MktoForms2,HubSpotForms:void 0!==window.HubSpotForms,analytics:void 0!==window.analytics,heap:void 0!==window.heap},this._initialize(this.config)}var i,a,s;return i=e,(a=[{key:"_handleMktoForms",value:function(){var t=this;!0!==this.handledForms&&(this.handledForms=!0,window.MktoForms2.whenReady((function(e){var n=e.getFormElem()[0],r=t._readCookie("__ecatft"),i=t._readCookie("__ecatlt"),a={ec_utm_campaign_first__c:r.utm_campaign||"NULL",ec_utm_source_first__c:r.utm_source||"NULL",ec_utm_medium_first__c:r.utm_medium||"NULL",ec_utm_content_first__c:r.utm_content||"NULL",ec_utm_term_first__c:r.utm_term||"NULL",ec_utm_device_first__c:r.utm_device||"NULL",gclid__c:r.gclid||"NULL",GCLID__c:r.gclid||"NULL",ec_landing_page_first__c:r.lp||"NULL",ec_referrer_first__c:r.referrer||"NULL",ec_utm_campaign_last__c:i.utm_campaign||"NULL",ec_utm_source_last__c:i.utm_source||"NULL",ec_utm_medium_last__c:i.utm_medium||"NULL",ec_utm_content_last__c:i.utm_content||"NULL",ec_utm_term_last__c:i.utm_term||"NULL",ec_utm_device_last__c:i.utm_device||"NULL",gclid_last__c:i.gclid||"NULL",GCLID_last__c:i.gclid||"NULL",ec_referrer_last__c:i.referrer||"NULL",ec_landing_page_last__c:i.lp||"NULL"},c={"Form ID":"mktoForm_".concat(e.getId())};n.getAttribute("data-formType")&&(c["Form Type"]=n.getAttribute("data-formType")),n.getAttribute("data-boundForm")&&(c["Bound Form Selector"]=n.getAttribute("data-boundForm")),"kiosk"!==n.getAttribute("data-formType")&&e.addHiddenFields(a),e.onSubmit((function(){"kiosk"===n.getAttribute("data-formType")&&e.vals({_mkt_trk:""});var r=o({Event:"Before Submit",Submittable:e.submittable()},c);t.track("Marketo Form Event",r);var i=e.vals().Email,a=t.identify(i);e.addHiddenFields({ec_heap_id__c:a})})),e.onValidate((function(e){var n=o({Event:"Validate",Valid:e},c);t.track("Marketo Form Event",n)})),e.onSuccess((function(){window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"MarketoFormSubmit",formId:"mktoForm_".concat(e.getId()),pageUrl:"".concat(window.location.origin).concat(window.location.pathname)});var r=o({Event:"Submitted"},c);if(t.track("Marketo Form Event",r),"blind"===n.getAttribute("data-formType"))return e.followupUrl&&document.location.replace(e.followupUrl),!1}))})))}},{key:"_handleHubspotForms",value:function(){var t=this;!0!==this.handledForms&&(this.handledForms=!0,this.autofill({first_touch:{utm_campaign:"input[name=ec_utm_campaign_first__c]",utm_source:"input[name=ec_utm_source_first__c]",utm_medium:"input[name=ec_utm_medium_first__c]",utm_content:"input[name=ec_utm_content_first__c]",utm_term:"input[name=ec_utm_term_first__c]",utm_device:"input[name=ec_utm_device_first__c]",lp:"input[name=ec_landing_page_first__c]",referrer:"input[name=ec_referrer_first__c]",gclid:"input[name=gclid__c]"},last_touch:{utm_campaign:"input[name=ec_utm_campaign_last__c]",utm_source:"input[name=ec_utm_source_last__c]",utm_medium:"input[name=ec_utm_medium_last__c]",utm_content:"input[name=ec_utm_content_last__c]",utm_term:"input[name=ec_utm_term_last__c]",utm_device:"input[name=ec_utm_device_last__c]",lp:"input[name=ec_landing_page_last__c]",referrer:"input[name=ec_referrer_last__c]",gclid:"input[name=gclid_last__c]"}}),window.addEventListener("message",(function(e){"hsFormCallback"===e.data.type&&"onFormSubmitted"===e.data.eventName&&(window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"HubSpotFormSubmit",formId:e.data.id,pageUrl:"".concat(window.location.origin).concat(window.location.pathname)}),t.track("Marketing - HubSpot Form Event",{"Form ID":e.data.id,Event:"Submitted"}))})))}},{key:"_createCookie",value:function(t,e){if(t)if(e){var o=e?JSON.stringify(e):"",n="";if("__ecatft"==t){var r=new Date;r.setFullYear(r.getFullYear()+10),n=" expires="+r.toUTCString()+";"}document.cookie=t+"="+o+"; path=/; domain="+this.domain+";"+n}else console.error("$EC Error: Must provide a value.");else console.error("$EC Error: Must provide a name.")}},{key:"_readCookie",value:function(t){if(t){for(var e=t+"=",o=document.cookie.split(";"),n=0;n<o.length;n++){for(var r=o[n];" "==r.charAt(0);)r=r.substring(1,r.length);if(0==r.indexOf(e))return JSON.parse(r.substring(e.length,r.length))}return{}}console.error("$EC Error: Must provide a name.")}},{key:"_extractHostname",value:function(){var t,e=window.location.href;if("localhost"!==(t="localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname?window.location.hostname:e.indexOf("://")>-1?e.split("/")[2]:e.split("/")[0])&&"127.0.0.1"!==t){var o=(t=(t=t.split(":")[0]).split("?")[0]).split(".");t=o[o.length-2]+"."+o[o.length-1]}return t}},{key:"_handleAttributionCookie",value:function(){var t=this._readCookie("__ecatft"),e=this._readCookie("__ecatlt"),o=new URLSearchParams(document.location.search),n={utm_campaign:o.get("utm_campaign")?o.get("utm_campaign").substring(0,254):"",utm_source:o.get("utm_source")?o.get("utm_source").substring(0,254):"",utm_medium:o.get("utm_medium")?o.get("utm_medium").substring(0,254):"",utm_content:o.get("utm_content")?o.get("utm_content").substring(0,254):"",utm_term:o.get("utm_term")?o.get("utm_term").substring(0,254):"",utm_device:o.get("utm_device")?o.get("utm_device").substring(0,254):"",referrer:document.referrer.split("?")[0].substring(0,254)||"",gclid:o.get("gclid")?o.get("gclid").substring(0,254):"",lp:(document.location.hostname+document.location.pathname).substring(0,254)||""};0===Object.keys(t).length&&this._createCookie("__ecatft",n),0===Object.keys(e).length&&this._createCookie("__ecatlt",n)}},{key:"_handleQueuedEvents",value:function(){var e=this;this.q&&this.q.forEach((function(o){var n=o[0],r=o.slice(1);["getFirst","getLast","generateGUID"].includes(n)?console.error("$EC Error: Method ".concat(n,"(").concat(r.join(", "),") cannot be queued, called too early.")):(console.warn("$EC Method $EC.".concat(n,"(").concat(r,") called before $EC initialized. Calling now...")),e[n].apply(e,t(r)))}))}},{key:"_initialize",value:function(t){var e=this;this.initialized?console.warn("$EC has already been initialized."):(this.config=t||{},this.initialized=!0,this.domain=this._extractHostname(),this._handleAttributionCookie(),window.addEventListener("message",(function(t){"hsFormCallback"===t.data.type&&"onFormReady"===t.data.eventName&&(e.apis.HubSpotForms=!0,e._handleHubspotForms())})),window.addEventListener("load",(function(){e.apis.analytics=void 0!==window.analytics,e.apis.heap=void 0!==window.heap,void 0!==window.MktoForms2&&(e.apis.MktoForms2=!0,e._handleMktoForms()),e._handleQueuedEvents()})))}}])&&c(i.prototype,a),s&&c(i,s),Object.defineProperty(i,"prototype",{writable:!1}),e}();window.$EC=new u})();